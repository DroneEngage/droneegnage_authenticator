generates random string


Send email to subscriber with subscription info.


**Param**:  {*} p_accountName destination email address


 {*} p_accessCode access code


 {*} fn_callback 


.


**Param**:  {*} p_accountName 


 {*} fn_callback 


Generates new access code.
This deletes all accout sub-logins, and create a new one.


**Param**:  {*} p_accountName 


 {*} fn_callback 


Retrieve user name or email using access code.
Please note that multiple access code may exist for the same username.


**Param**:  {*} p_accessCode 


 {*} fn_callback 


Retrieves account associated hardware and compare given hardware gievn on and returns uccess if found valid.


**Param**:  {*} p_accountSID Account_SID


 {*} p_hardwareID HardwareID


 {*} p_hardwareType type: cpu, generated, ...etc.


 {*} fn_callback call back to http response.


exits if no validation is required however we still go to database as we may need to 
store HW for future restrictions.


Main function to start Authentication Service.


Check agent application version info. SYNC function


**Param**:  {*} p_app 


 {*} p_version 


 {*} p_extra 


**Returns**:  null when there is no error.


Request creating a new login card.



**Param**:  {*} p_accountName 


 {*} p_accessCode 


 {*} p_actorType should be g: gcs d: drone


 {*} p_app 


 {*} p_version 


 {*} p_extra 


 {*} fn_callback return data to app could be valid or error code


 {*} fn_error result in 404 page error. This is mainly because of fake or invalid input mainly because of hacking.


Enterance to all operations with @var v_account_manager .


**Param**:  {*} p_subCommand 


 {*} p_accountName 


 {*} p_accessCode 


 {*} fn_callback return data to app could be valid or error code


 {*} fn_error result in 404 page error. This is mainly because of fake or invalid input mainly because of hacking.


Called by agent and calls are forward to @function fn_accountOperation.


**Param**:  {*} p_subCommand 


 {*} p_accountName 


 {*} p_app 


 {*} p_version 


 {*} p_extra 


 {*} fn_callback return data to app could be valid or error code


 {*} fn_error result in 404 page error. This is mainly because of fake or invalid input mainly because of hacking.


.


**Param**:  {*} p_subCommand for example CONST_CMD_VERIFY_HARDWARE_BY_ID


 {*} p_sessionID active session that identifies account & unit to Auth.


 {string} p_hardwareID string of (0-9 A-Z a-z) only identifies a particular hardware part. 
This can be generated by an algorithm. not necessary a CPUID or similar numbers.


 {*} p_hardwareType type of hardware that is describes.


Invalidates Session, and signal other servers to invalidate related connections.


**Param**:  {*} p_sessionID 


 {*} fn_Success 


 {*} fn_error 


Server Manager Server is a websocket server that listen to 
communication servers.
This Server handles traffic between Auth Server and Communication Server(s).
However this module is not responsible for parsing and processing this traffic.


Called when a communication server connects using websocket to this AuthServer.


**Param**:  {communication server client websocket} v_webSocket 


 {websocket request} p_request 


Sends data to a communication server.


**Param**:  {web socket guid} p_conn_guid 


 {message to send.} p_message 


Starts WebSocket Server that listens to Communication Servers.
This is server-server connection.


.


Decrypt message from Communication server. 


**Todo:**:  NOT IMPLEMENTED


**Param**:  {raw message from Auth} p_msg 


Returns current server that already handles communication for a given accountID


**Param**:  {*} p_loginCard 


Called when two servers handles the same account


**Param**:  {*} p_server1 


 {*} p_server2 


 {*} p_accountOfConflict 


Called when communication server is first added.


**Param**:  {*} p_serverInfo 


Called when communication server reconnects again.


**Param**:  {*} p_serverInfo 


Called when a communication server disconnects websocket.


**Param**:  {*} p_serverInfo 


called to select"m_bestServer" best available server based on selection criteria.
"m_bestServer" contains serverInfo that should a new account get attatched to.
Save communication server handles the same account.
server should be available and online.


**Todo:**:  NOT IMPLEMENTED ... store status in Database.


Handles info messages sent by communication servers.
This helps to maintain list of available servers.


**Param**:  {decrypted raw command} p_cmd 


Handles login response for a login request.
This function contains reply from Andruav Comm Server regarding the request of joining a unit/web to Andruav Comm Server chat.


**Param**:  {decrypted raw command} p_cmd 


Handles communication servers all messages.


**Param**:  {a GUID identifies connection instance. this refers to websocket client in case of using websockets.} p_conn_GUID 


 {raw encrypted message from communication servers} p_msg 


 check if server is available and if this particular account is handlered by a specific server.
   


**Param**:  {*} p_loginCard 


 {*} fn_callback 


Generate Login key from available Communication Server.


**Param**:  {*} p_loginCard 


 {server proposed by system to handle communication} p_server 


 {*} fn_success 


 {leads to final reply with CONST_ERROR_SERVER_NOT_AVAILABLE} fn_error 


**Todo**:  NOT IMPLEMENTED


**Param**:  {server to communicate with.} p_selectedServer 


Callback function linked to @module js_comm_server_manager 


**Param**:  {*} p_conn_guid 


 {*} p_code 


Initalize database connection for database manager


Get AccountSID & Permissions for a given email & accesscode.


**Param**:  {*} p_accountName email or username


 {*} p_accessCode alphanumeric strinf


 {*} fn_callback 


Get Account Name Email using accesscode. AccessCode is retreived from SubLogins.


**Param**:  {*} p_accessCode alphanumeric strinf


 {*} fn_callback 


create a new main account and one sub account.


**Param**:  {*} p_accountName 


 {*} fn_callback 


Check retrieve list of hardware attached to an AccountSID


**Param**:  {*} p_accountSID 


 {*} fn_callback 


**Returns**:  


This module handles session with web or agent.
It stores expires ..etc. sessions





This function is used to generated correspondant number for SID that is used with AndruavServer and other modues that needs to identify account_sid
without revealing true SID in database.


**Param**:  {*} p_SID_TRUE 


returns true if permission allows GCS Web


**Param**:  {*} p_permission 


SessionID used to communicate with Authentication server .


used to create login card in AndruavAuth. Also ANdruavServer session is created and a key is returned to connect to AndruavServer.


**Param**:  {*} p_accountName email or username


 {*} p_accessCode password


 {*} p_group group name or number


 {*} fn_callback 


generate JSON reply that is sent to the original requester.


**Param**:  {*} p_loginCard 


Copyright (c) 2007 Ariel Flesler - aflesler ○ gmail • com | https://github.com/flesler
Licensed under MIT


**Author**:  Ariel Flesler


**Version**:  2.1.2


contains letters or numbers


example: 5a.0.0


example: This is a 5 Sample


contains both letters AND numbers


https://www.w3resource.com/javascript/form/email-validation.php


Login Request by Agent


Verify my Hardware_ID


launch express server. core of everything


start parsing input and lauch app.


